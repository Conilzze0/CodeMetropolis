---
layout: page
title: About the CodeMetropolis project
excerpt: 
modified: 2014-08-08T19:44:38.564948-04:00
image:
  feature: outpost-landscape.png
---

CodeMetropolis is a software visualisation tool. It can create a Minecraft world using the values of source code metrics and the structure of the source code.Thus explore the inner structure of the program or compare several source code elements is easier. CodeMetropolis uses city metaphor for the visualisation of code elements as classes, functions or attributes.The city metaphor is one of the best known metaphors in software visualization. In this metaphor the source code components are represented as a part of a generated city, for example classes represented as buildings or methods represented as floor.  
It is a set of command line programs, connected into a single toolchain and a couple of supporting plug-ins and scripsts. The first tool is the Mapping Tool. This is process the input file, assign metrics to objects of the metropolis and generate an ouput xml that is ready to be used by the Placing Tool. The secong tool is Placing Tool. This is create the city layout and generate an output xml that is ready to be used by the Render Tool. The last tool is Render Tool. This proccess the ouput xml file of Placing Tool and create a virtual city in a Minecrafr world.  
CodeMetropolis tools use XML files to communicate with eachother. Mapping Tool generate an ouput XML file which is the input file for the Placing Tool. Then the Placing Tool generate an output XML file for the Rendering Tool. These XML files are using the same format defined in an XML Schema.  

**Installation guide**  
In order to use all functionality of CodeMetropolis you have to install the following dependencies. First you have to install Java Runtime Environment 8 to run the command line tools. Mapping Tool use the graph file to get the source code metrics. You have to install Minecraft client 1.8 to display the Minecraft world. 
First you have to run [SourceMeter][sm] to get the graph file, which contain the source code metrics. You can use it with the following command:

   *SourceMeterJava.exe -projectName=&lt;inputProjectName> -projectBaseDir=&lt;inputProjectDir> -resultsDir= &lt;ResultsDir>*

   Options:

   * -projectName=
      The name of the project. It will be the name of the directory in the results directory.

   * -projectBaseDir=
      The path of the directory of the source code.

   * -resultsDir=
      The path of the directory where the results will be stored.

After that, you can find the graph file in &lt;ResultsDir>&lt;inputProjectName>\java\&lt;date>. You can find more information in documentation of [SourceMeter][sm].

Then you have to run Mapping Tool following command:  

   *java -jar cmplacing.jar -i &lt;inputFile> -o &lt;outputFile> -m &lt;mappingFile>*  
  
   Options:  
   
   * -i &lt;path>, --input &lt;path>  
     Path of the input graph file. Required.  
  
   * -o &lt;path>, --output &lt;path>  
  Output will be generated with the path given. Default: "mappingToPlacing.xml"
  
   * -m &lt;path>, --mapping &lt;path>  
  Path of the input mapping file. Required.

The tool is using the mapping file to link source code elements and metrics to world objects. For example, link the LOC metric to the height of the building.It is a XML file. The *source* tag contain the metric that will be link to the object, the *name* parameter is the element of the source code and the *from* parameter is the metric. The *target* parameter is the world object, the *name* parameter is the name of the element in the city and the *to* parameter is property of the element. If the value of the metric doesn't fit the world element, you have to use conversion. 

Output xml now should be generated in output directory.

Second you have to run Placing Tool with the following command:  

   *java -jar cmplacing.jar -i &lt;inputFile>*
  
   * -i &lt;path>, --input &lt;path>  
    Path of the input xml file. This XML file generated by Placing Tool. Required.
  
   * -o &lt;path>, --output &lt;path>  
  Output will be generated with the path given. Default: "placingToRendering.xml"
  
   * -m , --map  
  Shows the map of the generated metropolis.
  
Output xml now should be generated in output directory

Then you have to run Rendering Tool following command::  

   *java -jar cmrender.jar -i &lt;inputFile> -world &lt;worldPath>*
  
   Options:  
   
   * -i &lt;path>, --input &lt;path>
    Path of the input xml file. This XML file generated by the Placing Tool. Required.

   * -world &lt;path>
    The path of folder where the world will be placed. Required.
    
Output world now should be generated in output directory. It may take a long time, depending on the size of the input.

You can find the generated world in output directory. You have to copy this folder to the "saves" folder in root of Minecraft. It is usually find at "C:\Users\&lt;username>\AppData\Roaming\.minecraft\".

After that you have to start Minecraft, choose SinglePlayer then choose the generated world and play selected world.

**Contribution guide**
This section of the documentation contains a guide for users who want to contribute code or documentation to the CodeMetropolis project. If you like contribute in the project, please send your patches to review.
You have to follow the next steps:  

* Checkout the branch from the repository.
* Start Eclipse and set the workspace the *toolchain-maven* directory.
* Import the project with Existing Maven Projects and the root directory will be the same as the workspace path.  

After that you can run the three tool in Eclipse. You have to set the arguments, which is in the Installation Guide section. 

[//]: # 
[sm]: <https://www.sourcemeter.com/>